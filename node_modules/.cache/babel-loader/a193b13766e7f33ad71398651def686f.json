{"ast":null,"code":"import _toConsumableArray from\"/home/hitesh/work/projects/diamond-sweeper/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/hitesh/work/projects/diamond-sweeper/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import DiceGif from'../../../assets/dice.gif';import'./game.scss';import{useState}from'react';import{useEffect}from'react';var Game=function Game(props){var GAMEROW=8,GAMECOL=8,MAX_DIAMONDS=8;//Initial data\nvar initialGame=[];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),gameState=_useState2[0],setGameState=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),openCards=_useState4[0],setOpenCards=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),revealedDiamondCount=_useState6[0],setRevealedDiamondCount=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isFinish=_useState8[0],setFinish=_useState8[1];//Utills\nvar getPlaceholder=function getPlaceholder(row,col){var pos=row+''+col;if(openCards.indexOf(pos)!=-1){if(gameState[row][col]){return/*#__PURE__*/React.createElement(\"div\",{className:\"board-place\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-diamond\"}));}else{return/*#__PURE__*/React.createElement(\"div\",{className:\"board-place\"});}}else{return/*#__PURE__*/React.createElement(\"div\",{className:\"board-place\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-question\"}));}};var randomNumber=function randomNumber(min,max){return Math.round(Math.random()*(max-min)+min);};var openCard=function openCard(rowIndex,colIndex){if(isFinish){return;}var newArr=_toConsumableArray(openCards);newArr.push(rowIndex+''+colIndex);setOpenCards(newArr);if(gameState[rowIndex][colIndex]){if(revealedDiamondCount==7){setFinish(true);}else{setRevealedDiamondCount(revealedDiamondCount+1);}}};useEffect(function(){var diamondPos=[];for(var i=0;i<MAX_DIAMONDS;i++){diamondPos.push(randomNumber(10*i,10*i+(GAMECOL-1)));}for(var _i=0;_i<GAMEROW;_i++){initialGame[_i]=[];for(var j=0;j<GAMECOL;j++){if(diamondPos.indexOf(Number(_i+''+j))!=-1){initialGame[_i][j]=true;}else{initialGame[_i][j]=false;}}}setGameState(initialGame);},[]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"game-container\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"heading\"},\"Diamond Sweeper\"),isFinish?/*#__PURE__*/React.createElement(\"h3\",{className:\"green-heading\"},\"You won! Your score is : \",GAMEROW*GAMECOL-openCards.length):null,/*#__PURE__*/React.createElement(\"div\",{className:\"board\"},gameState.map(function(row,rowIndex){return/*#__PURE__*/React.createElement(\"div\",{className:\"row\",key:rowIndex+''},row.map(function(col,colIndex){return/*#__PURE__*/React.createElement(\"div\",{className:'col',key:rowIndex+''+colIndex,onClick:function onClick(){return openCard(rowIndex,colIndex);}},getPlaceholder(rowIndex,colIndex));}));}))));};export default Game;","map":{"version":3,"sources":["/home/hitesh/work/projects/diamond-sweeper/src/client/components/pages/Game/Game.jsx"],"names":["React","DiceGif","useState","useEffect","Game","props","GAMEROW","GAMECOL","MAX_DIAMONDS","initialGame","gameState","setGameState","openCards","setOpenCards","revealedDiamondCount","setRevealedDiamondCount","isFinish","setFinish","getPlaceholder","row","col","pos","indexOf","randomNumber","min","max","Math","round","random","openCard","rowIndex","colIndex","newArr","push","diamondPos","i","j","Number","length","map"],"mappings":"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","sourcesContent":["import React from 'react';\nimport DiceGif from '../../../assets/dice.gif';\nimport './game.scss';\nimport { useState } from 'react';\nimport { useEffect } from 'react';\n\nconst Game = (props) => {\n\n    const GAMEROW = 8, GAMECOL = 8, MAX_DIAMONDS = 8;\n\n    //Initial data\n    let initialGame = [];\n    const [gameState, setGameState] = useState([]);\n    const [openCards, setOpenCards] = useState([]);\n    const [revealedDiamondCount, setRevealedDiamondCount] = useState(0);\n    const [isFinish, setFinish] = useState(false);\n\n    //Utills\n    const getPlaceholder = (row, col) => {\n        let pos = row+''+col;\n        if(openCards.indexOf(pos) != -1){\n            if(gameState[row][col]){\n                return <div className='board-place'><i className='fa fa-diamond'></i></div>\n            }else{\n                return <div className='board-place'></div>\n            }\n        }else{\n            return <div className='board-place'><i className='fa fa-question'></i></div>\n        }\n    }\n\n    const randomNumber = (min, max) => {  \n        return Math.round(Math.random() * (max - min) + min); \n    }\n\n    const openCard = (rowIndex, colIndex) => {\n        if(isFinish){\n            return;\n        }\n        let newArr = [...openCards];\n        newArr.push(rowIndex+''+colIndex);\n        setOpenCards(newArr);\n\n        if(gameState[rowIndex][colIndex]){\n            if(revealedDiamondCount == 7){\n                setFinish(true);\n            }else{\n                setRevealedDiamondCount(revealedDiamondCount + 1);\n            }\n        }   \n    }\n\n    useEffect(() => {\n        let diamondPos = [];\n        for(let i = 0; i < MAX_DIAMONDS; i++){\n            diamondPos.push(randomNumber(10*i, 10*i+(GAMECOL - 1)));\n        }\n        for (let i = 0; i < GAMEROW; i++) {\n            initialGame[i] = [];\n            for (let j = 0; j < GAMECOL; j++) {\n                if (diamondPos.indexOf(Number(i+''+j)) != -1) {\n                    initialGame[i][j] = true;\n                } else {\n                    initialGame[i][j] = false;\n                }\n            }\n        }\n        setGameState(initialGame)\n    }, [])\n\n    return (\n        <>\n            <div className='game-container'>\n                <h2 className='heading'>Diamond Sweeper</h2>\n                {isFinish ? <h3 className='green-heading'>You won! Your score is : {(GAMEROW*GAMECOL) - openCards.length}</h3> : null}\n                <div className='board'>\n                    {gameState.map((row, rowIndex) => {\n                        return <div className='row' key={rowIndex+''}>\n                            {row.map((col, colIndex) => {\n                                return <div className={'col'} key={rowIndex+''+colIndex} onClick={() => openCard(rowIndex, colIndex)}>\n                                    {getPlaceholder(rowIndex, colIndex)}\n                                </div>\n                            })}\n                        </div>\n                    })}\n                </div>\n            </div>\n        </>\n    )\n}\n\nexport default Game;"]},"metadata":{},"sourceType":"module"}